[[extend 'layout.html']]

<style>
[v-cloak] {
    display: none;
}
</style>

<div class="section" id="app" v-cloak>
    <h1>Checklist Page</h1>
    <button @click="goToMyChecklists">My Checklists</button>
    <!-- Checklist form -->
    <div>
        <input type="text" placeholder="Search species..." v-model="speciesSearch">
        <ul>
            <li v-for="s in species.filter(sp => sp.name.toLowerCase().includes(speciesSearch.toLowerCase()))" :key="s.id">
                {{ s.name }}
                <button @click="addSpeciesToChecklist(s.name)">Add</button>
            </li>
        </ul>
    </div>

    <table>
        <thead>
            <tr>
                <th>Species</th>
                <th>Count</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            <tr v-for="(item, index) in checklist" :key="index">
                <td>{{ item.species }}</td>
                <!-- <td>{{ item.count }}</td> -->

                <td>
                  <!-- Text box for manually entering the count -->
                  <input type="number" v-model="item.count" min="0" />
              </td>

                <td>
                    <button @click="incrementCount(index)">+</button>
                    <button @click="removeFromChecklist(index)">Remove</button>
                </td>
            </tr>
        </tbody>
    </table>

    <button @click="submitChecklist">Submit Checklist</button>
</div>

[[block page_scripts]]
<script>
    const lat = "[[=lat]]";
    const lng = "[[=lng]]";
</script>
<script src="js/checklist.js"></script>
[[end]]
